<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        
        <form id="form" action="" method="get">
    
            <hgroup>
            <h1>Create an account</h1>
            <p>One account for everything</p>
            <p>Already have an account?<a href="">Sign In</a></p>
            </hgroup>
            
                
                    <label>Username<br>
                        
                        <input 
                        type="text" 
                        name="username"
                        placeholder="What would you like to be called?"
                        pattern="[A-Za-z0-9\-_\.]{6,20}" 
                        oninvalid="this.setCustomValidity(`Username must be 6-20 alphanumeric characters`)"
                        oninput="this.setCustomValidity('')"
                        autofocus
                        required>
                        <i id="user-check" class="fa fa-times"></i>
                        <div class="warning"><br>Use 6-20 alphanumeric characters<br>Pick something memorable!</div>
                    </label>
                    <br><br>
               
                    <label>Phone Number<br>
                       <input 
                       type="tel" 
                       name="number"
                       pattern="[0-9]{3}-?[0-9]{3}-?[0-9]{4}"
                       placeholder="555-555-5555"
                       oninvalid="this.setCustomValidity(`Don't forget to enter your number! e.g. 555-555-5555`)"
                       oninput="this.setCustomValidity('')"
                       required>
                       <i id="tel-check" class="fa fa-times"></i>
                       <div class="warning"><br>Let me get your digits, please.</div>
                    </label>
                    <br>
            
                    <label>Password<br>
                        <input 
                        type="password" 
                        name="password" 
                        pattern="[0-9A-Za-z!@#$%^&*()_+=-]{6,20}"
                        oninvalid="this.setCustomValidity(
                            'Password must be between 6 and 20 characters \n Password must use letters, numbers, and !@#$%^&*()_-+=')"
                       oninput="this.setCustomValidity('')"
                       required>
                        <i id="password-check" class="fa fa-times"></i>
                    <div class="warning"><br>Pick something that isn't gonna get hacked!<br>
                                And that you will remember...<br>
                                And that is between 6-20 characters</div>
                    
                </label>
              <input id="submit" type="submit" action="#" value="Create Account">
                <div id="terms"><em>By clicking Create Account you <a href="">agree</a> to <br>
                            give me all your precious information.<br>
                            Thanks!</em></div>

        </form>
    </body>
    <script>
        $(() => {
        function validate(element) {
            let form = document.forms["form"];
            return form[element].checkValidity();
        }
        $('input').on('input', (e) => {
            let input = e.target
            $(input).parent()
                    .children('div')
                    .css("display", "red");
   
            if (validate(input.name)){
                $(input).parent()
                    .children('div')
                    .css("display", "none")
                    .end()
                    .children('i.fa')
                    .removeClass("fa-times")
                    .addClass("fa-check")
                    .css("color", "green");
                
                
            } else {
                $(input).parent()
                    .children('div')
                    .css("display", "block")
                    .end()
                    .children('i.fa')
                    .removeClass("fa-check")
                    .addClass("fa-times")
                    .css("color", "red");
            }

        })
        $("#submit").on("click", (e)=>{
         
            let form = $(e.target).parent("form");
            let fields = form.children("label").children("input")
           
            for (let i = 0; i<3; i++) {
                if (!(fields[i].checkValidity())){
                    return;
                }
           
                $("form").html("<h1>Thanks for submitting!</h1><h2 style='text-align:center'>Your data are being spirited away to grungy, cyberpunk hackers as we speak!</h2><div style='text-align:center'><em>Just kidding. Your data didn't go anywhere. Chill out, bro!</em></div>");
                e.preventDefault();
                return false;
            }
            
        })
    }) 

    </script>
</html>